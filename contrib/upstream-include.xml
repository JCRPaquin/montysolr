
<project name="upstream-include" xmlns:artifact="antlib:org.apache.maven.artifact.ant" xmlns:if="ant:if">
    
    <import file="./contrib-build.xml"/>
    
    <property name="include.path" value="solr/contrib/${ant.project.name}" if:set="solr.nature" />
    <property name="include.path" value="lucene/${ant.project.name}" if:set="lucene.nature" />
    <property name="include.location" location="${common.build.dir}/solr-download/apache-solr-${solr.version}/${include.path}"/>
    
    
    <condition property="include.exists" value="true">
        <and>
            <available file="${include.location}/build.xml" />
        </and>
    </condition>
    
    <target name="unlink-upstream">
        <delete dir="${include.location}" />
    </target>
    
    <!-- link to upstream ant targets -->
    <target name="test" depends="link-upstream">
        <ant target="test" dir="${include.location}"
                            inheritall="false">
            <property name="javac.doclint.args" value="-Xdoclint:none" />
        </ant>
    </target>

    <target name="default" depends="link-upstream">
        <ant target="default" dir="${include.location}"
                            inheritall="false">
            <property name="javac.doclint.args" value="-Xdoclint:none" />
        </ant>
    </target>
    
    <target name="jar" depends="link-upstream">
        <ant target="jar" dir="${include.location}"
                            inheritall="false">
            <property name="javac.doclint.args" value="-Xdoclint:none" />
        </ant>
    </target>
    
    <target name="compile" depends="link-upstream">
        <ant target="compile" dir="${include.location}"
                            inheritall="false">
            <property name="javac.doclint.args" value="-Xdoclint:none" />
        </ant>
    </target>
</project>